<!DOCTYPE html>

<html>
    <head>
        initial-scale=1">
            <title>WebSocket Server</title>
            <style>
                body{
                    font-family: sans-serif;padding: 20px;
                    background:#121212;color:#fff;
                }
                #log{
                    background: #000; padding: 10px;
                    height: 300px; overflow-y: scroll;
                    border: 1p solid #333;
                }
                .status-on{color: #00ff00;}
                .status-off{color: #ff0000;}
            </style>
    </head>
    <body>
       <h1>WebSocket Broadcast Console</h1>
       <p id="status" class = "status-off">Connecting...</p>
       <form id="message-form">
        <input id="message-input" type="text" placeholder="Send cargo ..." required />
        <button type="submit">Deploy mssg</button>
       </form>

       <h3>Live Stream Logs</h3>
       <pre id="log"></pre>
    </body>

    <script>
        const statulEl = document.getElementById("status");
        const log = document.getElementById("log");
        const input = document.getElementById("message-input");

        const socket = new WebSocket("ws://localhost:8080");

        const appendLog = (label,message) => {
            const entry = `${new Date().toLocaleTimeString()} - ${label}: ${message}\n`;
            log.textContent += entry;
        }

        socket.addEventListener("open", () => {
            statulEl.textContent = "Connected to WebSocket Server";
            statulEl.className = "status-on";
            appendLog("[System]","WebSocket connection established.");
        });

        socket.addEventListener('close',()=>{
            statulEl.textContent = "Disconnected from WebSocket Server";
            statulEl.className = "status-off";
            appendLog("[System]","WebSocket connection closed.");
        });

        socket.addEventListener('message',(e)=>{
            appendLog('[Received]',e.data);
        });
    
        document.getElementById("message-form").addEventListener("submit",(e)=>{
            e.preventDefault();
            
            if(socket.readyState !== WebSocket.OPEN){
                appendLog("[Error]","Cannot send message. WebSocket is not open.");
                return;
            }
            const message = input.value.trim();
            socket.send(message);
            appendLog('[Sent]',message);
            input.value = "";
        });
    </script>
</html>